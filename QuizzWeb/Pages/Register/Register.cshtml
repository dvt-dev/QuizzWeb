@page
@model QuizzWeb.Pages.Register.RegisterModel
@{
    Layout = "";
}

<link href="~/css/site.css" rel="stylesheet" />

<style>
    #register {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
    }

    .register-container {
        width: 500px;
        padding: 24px;
        display: flex;
        flex-direction: column;
        gap: 20px;
        background-color: #ddd;
    }

    .register-title {
        font-size: 6rem;
        text-align: center;
    }

    .register-form {
        display: flex;
        flex-direction: column;
        gap: 20px;
    }

    .register-form_item {
        display: flex;
        flex-direction: column;
        gap: 6px;
    }


    .register-btn {
        background-color: #fff;
        padding: 12px 16px;
        width: fit-content;
        margin: 0 auto;
        box-shadow: rgba(100, 100, 111, 0.2) 0px 7px 29px 0px;
    }

        .register-btn:hover {
            cursor: pointer;
            background-color: #5a3ac9;
            color: white;
            transition: all .3s ease-in;
        }

    .control {
        text-align: center;
    }

        .control a {
            cursor: pointer;
        }
</style>


<div id="register">
    <div class="register-container">
        <h1 class="register-title">Register</h1>
        <form class="register-form">
            <div class="register-form_item">
                <label class="register-form_label">Tên người dùng</label>
                <input class="register-form_input" id="name" autocomplete="username" type="text" placeholder="Nhập tên người dùng" />
            </div>
            <div class="register-form_item">
                <label class="register-form_label">Tên đăng nhập</label>
                <input class="register-form_input" id="account" autocomplete="username" type="text" placeholder="Nhập tên đăng nhập" />
            </div>
            <div class="register-form_item">
                <label class="register-form_label">Mật khẩu</label>
                <input class="register-form_input" id="password" autocomplete="current-password" type="password" placeholder="Nhập mật khẩu" />
            </div>
        </form>

        <button class="register-btn" onclick="register()">Đăng ký</button>
        <div class="control">
            <span>Have an accout?</span>
            <a>Login</a>
        </div>
    </div>
</div>

<script src="~/lib/jquery/dist/jquery.min.js"></script>
<script>

    $("a").click(function () {
        window.location.href = '/login/login';
    })

    const register = async () => {

        let model = {
            name: $('#name').val(),
            account: $('#account').val(),
            password: $('#password').val(),
        }

        let rq = await fetch('https://localhost:7270/api/User/Register', {
            method: 'post',
            headers: {
                'Content-Type': 'application/json; charset=utf-8'
            },
            body: JSON.stringify(model)
        })

        let rs = await rq.json();

        if (rs.status === "error") {
            alert(rs.message);
        }

        if (rs.status === "success") {
            window.location.href = "/login/login";

        }
        console.log(rs)

    }
</script>